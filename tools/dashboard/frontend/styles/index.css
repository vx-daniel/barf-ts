@import "tailwindcss";
@plugin "daisyui" {
  themes: barf --default;
  logs: true;
}

/* Custom daisyUI theme mapped to our design tokens */
@plugin "daisyui/theme" {
  name: "barf";
  default: true;
  color-scheme: dark;

  --color-base-100: #0d0d1a;
  --color-base-200: #161625;
  --color-base-300: #1e1e32;
  --color-base-content: #e2e8f0;

  --color-primary: #a78bfa;
  --color-primary-content: #ffffff;
  --color-secondary: #7c3aed;
  --color-secondary-content: #ffffff;
  --color-accent: #a78bfa;
  --color-accent-content: #ffffff;

  --color-neutral: #2a2a45;
  --color-neutral-content: #e2e8f0;

  --color-info: #0f4ac6;
  --color-info-content: #ffffff;
  --color-success: #22c55e;
  --color-success-content: #ffffff;
  --color-warning: #f59e0b;
  --color-warning-content: #000000;
  --color-error: #ef4444;
  --color-error-content: #ffffff;

  --radius-selector: 6px;
  --radius-field: 6px;
  --radius-box: 8px;
  --border: 1px;
  --depth: 0;
  --noise: 0;
}

/* ── Resize handles ──────────────────────────────────────────── */
@layer components {
  .resize-handle {
    position: relative;
    flex-shrink: 0;
    background: transparent;
    z-index: 10;
  }
  .resize-handle::after {
    content: "";
    position: absolute;
    background: var(--color-border);
    transition: background 0.15s;
  }
  .resize-handle:hover::after,
  .resize-handle:active::after {
    background: var(--color-accent);
  }
  .resize-handle-v {
    width: 5px;
    cursor: col-resize;
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    z-index: 10;
  }
  .resize-handle-v::after {
    top: 0;
    bottom: 0;
    left: 2px;
    width: 1px;
  }
  .resize-handle-h {
    height: 5px;
    cursor: row-resize;
    width: 100%;
  }
  .resize-handle-h::after {
    left: 0;
    right: 0;
    top: 2px;
    height: 1px;
  }
}

/* ── Design tokens ─────────────────────────────────────────────── */
/* Single source of truth for the dashboard colour palette.        */
/* Tailwind generates utilities like bg-surface, text-muted, etc.  */
/* Custom CSS can use var(--color-*) for the same values.          */
@theme {
  /* Surfaces */
  --color-bg: #0d0d1a;
  --color-bg-deep: #0a0a14;
  --color-surface: #161625;
  --color-surface2: #1e1e32;
  --color-overlay: rgba(0, 0, 0, 0.6);

  /* Borders */
  --color-border: #2a2a45;

  /* Text */
  --color-text: #e2e8f0;
  --color-text-muted: #7c8db0;
  --color-text-slate: #94a3b8;
  --color-text-light: #cbd5e1;

  /* Accent */
  --color-accent: #a78bfa;
  --color-accent-bold: #7c3aed;
  --color-accent-hover: #6d28d9;

  /* State colours — issue lifecycle */
  --color-state-new: #6b7280;
  --color-state-groomed: #3b82f6;
  --color-state-planned: #f59e0b;
  --color-state-in-progress: #f97316;
  --color-state-completed: #a6d189;
  --color-state-verified: #4ab118;
  --color-state-stuck: #ef4444;
  --color-state-split: #a855f7;
  --color-state-in-audit: #0ea5e9;

  /* Semantic colours */
  --color-danger: #ef4444;
  --color-danger-light: #f87171;
  --color-warning: #f59e0b;
  --color-warning-light: #fbbf24;
  --color-success: #22c55e;
  --color-success-light: #4ade80;
  --color-info: #60a5fa;

  /* Radius */
  --radius-default: 6px;

  /* Typography — --text-* overrides Tailwind's text-xs/sm/base/etc. */
  --font-mono: "SF Mono", "Fira Code", monospace;
  --text-xs: 10px;
  --text-xs--line-height: 1.4;
  --text-sm: 11px;
  --text-sm--line-height: 1.4;
  --text-base: 12px;
  --text-base--line-height: 1.5;
  --text-md: 13px;
  --text-md--line-height: 1.5;
  --text-lg: 14px;
  --text-lg--line-height: 1.5;
  --text-xl: 15px;
  --text-xl--line-height: 1.4;
  --text-2xl: 16px;
  --text-2xl--line-height: 1.4;

  /* Spacing — used by p-*, m-*, gap-*, w-*, h-* */
  --spacing-xs: 4px;
  --spacing-sm: 6px;
  --spacing-md: 8px;
  --spacing-lg: 10px;
  --spacing-xl: 12px;
  --spacing-2xl: 14px;
  --spacing-3xl: 16px;
  --spacing-4xl: 20px;
}

/* ── Metadata / JSON syntax highlighting (innerHTML-injected) ──── */
.metadata-viewer {
  background: #1e1e1e;
  color: #d4d4d4;
  font-family: "SF Mono", "Fira Code", "Consolas", monospace;
  font-size: 12px;
  padding: 16px;
  overflow: auto;
  height: 100%;
  margin: 0;
  line-height: 1.5;
}

.json-key {
  color: #9cdcfe;
}
.json-string {
  color: #ce9178;
}
.json-number {
  color: #b5cea8;
}
.json-boolean {
  color: #569cd6;
}
.json-null {
  color: #808080;
}

/* ── Editor preview (innerHTML-injected markdown) ───────────────── */
#editor-preview {
  background-color: var(--color-surface2);
}
#editor-preview h1,
#editor-preview h2,
#editor-preview h3 {
  color: var(--color-accent);
  margin: 12px 0 6px;
}
#editor-preview h1 {
  font-size: 16px;
}
#editor-preview h2 {
  font-size: 14px;
}
#editor-preview h3 {
  font-size: 13px;
}
#editor-preview p {
  margin: 4px 0;
}
#editor-preview code {
  background: var(--color-surface2);
  padding: 1px 4px;
  border-radius: 3px;
  font-size: 11px;
}
#editor-preview pre {
  background: var(--color-surface2);
  padding: 10px;
  border-radius: var(--radius-default);
  overflow-x: auto;
  margin: 8px 0;
}
#editor-preview pre code {
  background: none;
  padding: 0;
}
#editor-preview ul,
#editor-preview ol {
  padding-left: 20px;
}
#editor-preview li {
  margin: 2px 0;
}
#editor-preview input[type="checkbox"] {
  margin-right: 6px;
}
