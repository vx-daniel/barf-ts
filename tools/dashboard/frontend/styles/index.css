@import "tailwindcss";

/* ── Palette ──────────────────────────────────────────────────── */
/* Single source of truth for every raw colour value.              */
/* Both @theme (Tailwind utilities) and DaisyUI reference these.   */
:root {
  /* Surfaces */
  --palette-bg: #0d0d1a;
  --palette-bg-deep: #0a0a14;
  --palette-surface: #161625;
  --palette-surface2: #1e1e32;
  --palette-overlay: rgba(0, 0, 0, 0.6);

  /* Borders */
  --palette-border: #2a2a45;

  /* Text */
  --palette-text: #e2e8f0;
  --palette-text-muted: #7c8db0;
  --palette-text-slate: #94a3b8;
  --palette-text-light: #cbd5e1;

  /* Accent */
  --palette-accent: #a78bfa;
  --palette-accent-bold: #7c3aed;
  --palette-accent-hover: #6d28d9;

  /* Semantic */
  --palette-danger: #ef4444;
  --palette-danger-light: #f87171;
  --palette-warning: #f59e0b;
  --palette-warning-light: #fbbf24;
  --palette-success: #22c55e;
  --palette-success-light: #4ade80;
  --palette-info: #60a5fa;
  --palette-info-dark: #0f4ac6;

  /* State colours — issue lifecycle
     Progression: slate → indigo → violet → amber → emerald → green */
  --palette-state-new: #64748b;
  --palette-state-groomed: #6366f1;
  --palette-state-planned: #8b5cf6;
  --palette-state-in-progress: #f59e0b;
  --palette-state-completed: #a3e635;
  --palette-state-verified: #22c55e;
  --palette-state-stuck: #f87171;
  --palette-state-split: #c084fc;
  --palette-state-in-audit: #38bdf8;

  /* Shared */
  --palette-white: #ffffff;
  --palette-black: #000000;
}

@plugin "daisyui" {
  themes: barf --default;
  logs: true;
}

/* Custom daisyUI theme mapped to palette tokens */
@plugin "daisyui/theme" {
  name: "barf";
  default: true;
  color-scheme: dark;

  --color-base-100: var(--palette-bg);
  --color-base-200: var(--palette-surface);
  --color-base-300: var(--palette-surface2);
  --color-base-content: var(--palette-text);

  --color-primary: var(--palette-accent);
  --color-primary-content: var(--palette-white);
  --color-secondary: var(--palette-accent-bold);
  --color-secondary-content: var(--palette-white);
  --color-accent: var(--palette-accent);
  --color-accent-content: var(--palette-white);

  --color-neutral: var(--palette-border);
  --color-neutral-content: var(--palette-text);

  --color-info: var(--palette-info-dark);
  --color-info-content: var(--palette-white);
  --color-success: var(--palette-success);
  --color-success-content: var(--palette-white);
  --color-warning: var(--palette-warning);
  --color-warning-content: var(--palette-black);
  --color-error: var(--palette-danger);
  --color-error-content: var(--palette-white);

  --radius-selector: 0.375rem;
  --radius-field: 0.375rem;
  --radius-box: 0.5rem;
  --border: 1px;
  --depth: 0;
  --noise: 0;
}

/* ── Resize handles ──────────────────────────────────────────── */
@layer components {
  .resize-handle {
    position: relative;
    flex-shrink: 0;
    background: transparent;
    z-index: 10;
  }
  .resize-handle::after {
    content: "";
    position: absolute;
    background: var(--color-border);
    transition: background 0.15s;
  }
  .resize-handle:hover::after,
  .resize-handle:active::after {
    background: var(--color-accent);
  }
  .resize-handle-v {
    width: 0.3125rem;
    cursor: col-resize;
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    z-index: 10;
  }
  .resize-handle-v::after {
    top: 0;
    bottom: 0;
    left: 0.125rem;
    width: 1px;
  }
  .resize-handle-h {
    height: 0.3125rem;
    cursor: row-resize;
    width: 100%;
  }
  .resize-handle-h::after {
    left: 0;
    right: 0;
    top: 0.125rem;
    height: 1px;
  }
}

/* ── Design tokens ─────────────────────────────────────────────── */
/* Tailwind utilities (bg-surface, text-muted, etc.) reference the  */
/* palette vars above so every colour is defined exactly once.      */
@theme {
  /* Surfaces */
  --color-bg: var(--palette-bg);
  --color-bg-deep: var(--palette-bg-deep);
  --color-surface: var(--palette-surface);
  --color-surface2: var(--palette-surface2);
  --color-overlay: var(--palette-overlay);

  /* Borders */
  --color-border: var(--palette-border);

  /* Text */
  --color-text: var(--palette-text);
  --color-text-muted: var(--palette-text-muted);
  --color-text-slate: var(--palette-text-slate);
  --color-text-light: var(--palette-text-light);

  /* Accent */
  --color-accent: var(--palette-accent);
  --color-accent-bold: var(--palette-accent-bold);
  --color-accent-hover: var(--palette-accent-hover);

  /* State colours — issue lifecycle */
  --color-state-new: var(--palette-state-new);
  --color-state-groomed: var(--palette-state-groomed);
  --color-state-planned: var(--palette-state-planned);
  --color-state-in-progress: var(--palette-state-in-progress);
  --color-state-completed: var(--palette-state-completed);
  --color-state-verified: var(--palette-state-verified);
  --color-state-stuck: var(--palette-state-stuck);
  --color-state-split: var(--palette-state-split);
  --color-state-in-audit: var(--palette-state-in-audit);

  /* Semantic colours */
  --color-danger: var(--palette-danger);
  --color-danger-light: var(--palette-danger-light);
  --color-warning: var(--palette-warning);
  --color-warning-light: var(--palette-warning-light);
  --color-success: var(--palette-success);
  --color-success-light: var(--palette-success-light);
  --color-info: var(--palette-info);

  /* Radius */
  --radius-default: 0.375rem;

  /* Typography — --text-* overrides Tailwind's text-xs/sm/base/etc. */
  --font-mono: "SF Mono", "Fira Code", monospace;
  --text-xs: 0.625rem;
  --text-xs--line-height: 1.4;
  --text-sm: 0.6875rem;
  --text-sm--line-height: 1.4;
  --text-base: 0.75rem;
  --text-base--line-height: 1.5;
  --text-md: 0.8125rem;
  --text-md--line-height: 1.5;
  --text-lg: 0.875rem;
  --text-lg--line-height: 1.5;
  --text-xl: 0.9375rem;
  --text-xl--line-height: 1.4;
  --text-2xl: 1rem;
  --text-2xl--line-height: 1.4;

  /* Spacing — used by p-*, m-*, gap-*, w-*, h-* */
  --spacing-xs: 0.25rem;
  --spacing-sm: 0.375rem;
  --spacing-md: 0.5rem;
  --spacing-lg: 0.625rem;
  --spacing-xl: 0.75rem;
  --spacing-2xl: 0.875rem;
  --spacing-3xl: 1rem;
  --spacing-4xl: 1.25rem;
}

/* ── Issue progress steps (custom per-state colours) ─────────────── */
/* Overrides DaisyUI step circle + connector with a --step-color var */
/* .step-colored::after {
  background-color: var(--step-color) !important;
  border-color: var(--step-color) !important;
}
.step-colored::before {
  background-color: var(--step-color) !important;
} */

/* ── Metadata / JSON syntax highlighting (innerHTML-injected) ──── */
.metadata-viewer {
  background: #1e1e1e;
  color: #d4d4d4;
  font-family: "SF Mono", "Fira Code", "Consolas", monospace;
  font-size: 0.75rem;
  padding: 1rem;
  overflow: auto;
  height: 100%;
  margin: 0;
  line-height: 1.5;
}

.json-key {
  color: #9cdcfe;
}
.json-string {
  color: #ce9178;
}
.json-number {
  color: #b5cea8;
}
.json-boolean {
  color: #569cd6;
}
.json-null {
  color: #808080;
}

/* ── Editor preview (innerHTML-injected markdown) ───────────────── */
#editor-preview {
  background-color: var(--color-surface2);
}
#editor-preview h1,
#editor-preview h2,
#editor-preview h3 {
  color: var(--color-accent);
  margin: 0.75rem 0 0.375rem;
}
#editor-preview h1 {
  font-size: 1rem;
}
#editor-preview h2 {
  font-size: 0.875rem;
}
#editor-preview h3 {
  font-size: 0.8125rem;
}
#editor-preview p {
  margin: 0.25rem 0;
}
#editor-preview code {
  background: var(--color-surface2);
  padding: 1px 0.25rem;
  border-radius: 0.1875rem;
  font-size: 0.6875rem;
}
#editor-preview pre {
  background: var(--color-surface2);
  padding: 0.625rem;
  border-radius: var(--radius-default);
  overflow-x: auto;
  margin: 0.5rem 0;
}
#editor-preview pre code {
  background: none;
  padding: 0;
}
#editor-preview ul,
#editor-preview ol {
  padding-left: 1.25rem;
}
#editor-preview li {
  margin: 0.125rem 0;
}
#editor-preview input[type="checkbox"] {
  margin-right: 0.375rem;
}
